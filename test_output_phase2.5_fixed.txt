/home/jenya/.rbenv/versions/3.4.7/bin/ruby -w -I"lib:test:lib" /home/jenya/.rbenv/versions/3.4.7/lib/ruby/gems/3.4.0/gems/rake-13.2.1/lib/rake/rake_test_loader.rb "test/builder/100_percent_coverage_test.rb" "test/builder/access_specifiers_test.rb" "test/builder/advanced_templates_test.rb" "test/builder/combinations_test.rb" "test/builder/comments_test.rb" "test/builder/cpp20_features_test.rb" "test/builder/dsl_generator_test.rb" "test/builder/dsl_v2/class_builder_test.rb" "test/builder/dsl_v2/control_dsl_test.rb" "test/builder/dsl_v2/dsl_v2_integration_test.rb" "test/builder/dsl_v2/expr_builder_test.rb" "test/builder/dsl_v2/function_builder_test.rb" "test/builder/dsl_v2/ownership_dsl_test.rb" "test/builder/dsl_v2/types_dsl_test.rb" "test/builder/edge_cases_test.rb" "test/builder/enum_class_test.rb" "test/builder/error_handling_test.rb" "test/builder/formatting_modes_test.rb" "test/builder/friend_declarations_test.rb" "test/builder/full_feature_validation_test.rb" "test/builder/inheritance_test.rb" "test/builder/initializer_lists_test.rb" "test/builder/inline_methods_test.rb" "test/builder/match_test.rb" "test/builder/modifiers_test.rb" "test/builder/nested_types_test.rb" "test/builder/ownership_test.rb" "test/builder/performance_test.rb" "test/builder/preprocessor_test.rb" "test/builder/product_test.rb" "test/builder/production_fixes_test.rb" "test/builder/result_option_test.rb" "test/builder/roundtrip_test.rb" "test/builder/static_members_test.rb" "test/builder/stream_ops_test.rb" "test/builder/sum_type_test.rb" "test/builder/template_dsl_test.rb" "test/builder/using_aliases_test.rb" "test/builder/whitespace_policy_test.rb" "test/integration/anonymous_namespace_roundtrip_test.rb" "test/integration/array_subscript_roundtrip_test.rb" "test/integration/attributes_roundtrip_test.rb" "test/integration/class_inheritance_roundtrip_test.rb" "test/integration/complex_class_test.rb" "test/integration/constexpr_variable_roundtrip_test.rb" "test/integration/constructor_destructor_roundtrip_test.rb" "test/integration/control_flow_roundtrip_test.rb" "test/integration/edge_cases_test.rb" "test/integration/enum_roundtrip_test.rb" "test/integration/error_recovery_test.rb" "test/integration/function_call_roundtrip_test.rb" "test/integration/function_modifiers_roundtrip_test.rb" "test/integration/generics_e2e_test.rb" "test/integration/gtk_gl_sample_test.rb" "test/integration/lambda_roundtrip_test.rb" "test/integration/literals_roundtrip_test.rb" "test/integration/member_access_roundtrip_test.rb" "test/integration/mlc_cli_test.rb" "test/integration/mlc_full_test.rb" "test/integration/more_operators_roundtrip_test.rb" "test/integration/namespace_body_roundtrip_test.rb" "test/integration/nested_class_members_test.rb" "test/integration/opengl_coverage_test.rb" "test/integration/optimization_integration_test.rb" "test/integration/out_of_line_operators_test.rb" "test/integration/parenthesized_roundtrip_test.rb" "test/integration/roundtrip_test.rb" "test/integration/stdlib_simple_e2e_test.rb" "test/integration/structured_bindings_test.rb" "test/integration/template_roundtrip_test.rb" "test/integration/template_types_roundtrip_test.rb" "test/integration/ternary_roundtrip_test.rb" "test/integration/unary_roundtrip_test.rb" "test/integration/using_declaration_roundtrip_test.rb" "test/integration/variable_declaration_roundtrip_test.rb" "test/lexer/lexer_basic_test.rb" "test/lexer/number_literals_test.rb" "test/lexer/token_test.rb" "test/lexer/trivia_in_tokens_test.rb" "test/mlc/analysis_passes_test.rb" "test/mlc/application_test.rb" "test/mlc/array_type_test.rb" "test/mlc/backends/bootstrap_test.rb" "test/mlc/backends/cpp_smoke_test.rb" "test/mlc/backends/legacy_adapter_test.rb" "test/mlc/backends/rule_engine_test.rb" "test/mlc/backends/string_helpers_equivalence_test.rb" "test/mlc/block_complexity_analyzer_test.rb" "test/mlc/block_expr_test.rb" "test/mlc/block_test.rb" "test/mlc/collections_test.rb" "test/mlc/comment_test.rb" "test/mlc/control_flow_statement_test.rb" "test/mlc/core_ir_generics_test.rb" "test/mlc/cpp_lowering_generics_test.rb" "test/mlc/diagnostics/event_logger_test.rb" "test/mlc/diagnostics/formatter_test.rb" "test/mlc/diagnostics/structured_logger_test.rb" "test/mlc/do_block_integration_test.rb" "test/mlc/do_block_test.rb" "test/mlc/effect_analyzer_test.rb" "test/mlc/enhanced_error_handling_test.rb" "test/mlc/error_diagnostics_test.rb" "test/mlc/esm_modules_test.rb" "test/mlc/event_bus_extensions_test.rb" "test/mlc/event_bus_test.rb" "test/mlc/function_registry_integration_test.rb" "test/mlc/function_registry_test.rb" "test/mlc/gcc_expression_strategy_test.rb" "test/mlc/generics_test.rb" "test/mlc/heredoc_test.rb" "test/mlc/import_service_integration_test.rb" "test/mlc/integration_test.rb" "test/mlc/io_test.rb" "test/mlc/lambda_test.rb" "test/mlc/let_test.rb" "test/mlc/list_comprehension_test.rb" "test/mlc/logical_ops_test.rb" "test/mlc/lowering_strategy_integration_test.rb" "test/mlc/match_analyzer_test.rb" "test/mlc/metadata_loader_service_test.rb" "test/mlc/module_system_test.rb" "test/mlc/multi_file_modules_test.rb" "test/mlc/opaque_type_test.rb" "test/mlc/pass_manager_test.rb" "test/mlc/pattern_matching_test.rb" "test/mlc/pipe_operator_test.rb" "test/mlc/roundtrip_test.rb" "test/mlc/rules_rule_engine_test.rb" "test/mlc/runtime_format_test.rb" "test/mlc/runtime_policy_api_test.rb" "test/mlc/runtime_policy_test.rb" "test/mlc/semantic_gen/engine_test.rb" "test/mlc/semantic_gen/passes/module_import_pass_test.rb" "test/mlc/semantic_gen/services/container_integration_test.rb" "test/mlc/stdlib_array_test.rb" "test/mlc/stdlib_conv_test.rb" "test/mlc/stdlib_file_test.rb" "test/mlc/stdlib_io_test.rb" "test/mlc/stdlib_math_test.rb" "test/mlc/stdlib_option_test.rb" "test/mlc/stdlib_resolution_test.rb" "test/mlc/stdlib_result_test.rb" "test/mlc/stdlib_scanner_integration_test.rb" "test/mlc/stdlib_scanner_test.rb" "test/mlc/stdlib_signature_registry_test.rb" "test/mlc/stdlib_string_test.rb" "test/mlc/stdlib_test.rb" "test/mlc/string_operations_test.rb" "test/mlc/sum_types_test.rb" "test/mlc/to_core_generics_test.rb" "test/mlc/type_constraint_solver_test.rb" "test/mlc/type_inference_architecture_test.rb" "test/mlc/type_inference_generics_test.rb" "test/mlc/type_registry_test.rb" "test/mlc/while_loop_test.rb" "test/nodes/array_subscript_test.rb" "test/nodes/base_nodes_test.rb" "test/nodes/block_statement_test.rb" "test/nodes/expression_nodes_test.rb" "test/nodes/function_call_test.rb" "test/nodes/member_access_test.rb" "test/nodes/parenthesized_expression_test.rb" "test/nodes/statement_nodes_test.rb" "test/nodes/ternary_test.rb" "test/nodes/unary_expression_test.rb" "test/parsers/array_subscript_parser_test.rb" "test/parsers/base_parser_test.rb" "test/parsers/block_parser_test.rb" "test/parsers/expression_parser_test.rb" "test/parsers/function_call_parser_test.rb" "test/parsers/member_access_parser_test.rb" "test/parsers/parenthesized_parser_test.rb" "test/parsers/program_parser_test.rb" "test/parsers/statement_parser_test.rb" "test/parsers/unary_parser_test.rb" 
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1117: warning: method redefined; discarding old generate_aurora_program
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1015: warning: previous definition of generate_aurora_program was here
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1144: warning: method redefined; discarding old generate_aurora_declaration
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1047: warning: previous definition of generate_aurora_declaration was here
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1155: warning: method redefined; discarding old generate_aurora_function
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1058: warning: previous definition of generate_aurora_function was here
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1171: warning: method redefined; discarding old generate_aurora_type
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1094: warning: previous definition of generate_aurora_type was here
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1191: warning: method redefined; discarding old generate_aurora_expression
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_generator.rb:1072: warning: previous definition of generate_aurora_expression was here
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/expr_builder.rb:358: warning: mismatched indentations at 'end' with 'module' at 5
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/expr_builder.rb:359: warning: mismatched indentations at 'end' with 'module' at 4
/home/jenya/workspaces/mlc/lib/cpp_ast/builder/function_builder.rb:33: warning: method redefined; discarding old body
/home/jenya/workspaces/mlc/lib/mlc/compiler/stdlib/scanner.rb:35: warning: mismatched indentations at 'end' with 'class' at 20
/home/jenya/workspaces/mlc/lib/mlc/parser/lexer.rb:315: warning: assigned but unused variable - content_start
/home/jenya/workspaces/mlc/lib/mlc/parser/type_parser.rb:201: warning: assigned but unused variable - first_variant_name
/home/jenya/workspaces/mlc/lib/mlc/semantic_gen/reducers/function_reducer.rb:114: warning: mismatched indentations at 'ensure' with 'def' at 91
/home/jenya/workspaces/mlc/lib/mlc/semantic_gen/reducers/function_reducer.rb:116: warning: mismatched indentations at 'end' with 'def' at 91
/home/jenya/workspaces/mlc/lib/mlc/semantic_gen/reducers/function_reducer.rb:144: warning: mismatched indentations at 'end' with 'def' at 131
/home/jenya/workspaces/mlc/lib/mlc/infrastructure/pass_manager.rb:185: warning: mismatched indentations at 'end' with 'class' at 5
/home/jenya/workspaces/mlc/lib/mlc/infrastructure/event_bus.rb:166: warning: mismatched indentations at 'end' with 'class' at 5
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:35: warning: mismatched indentations at 'end' with 'def' at 30
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:55: warning: mismatched indentations at 'end' with 'def' at 53
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:124: warning: mismatched indentations at 'end' with 'def' at 57
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:175: warning: mismatched indentations at 'end' with 'def' at 149
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:183: warning: mismatched indentations at 'end' with 'def' at 177
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:188: warning: mismatched indentations at 'end' with 'def' at 185
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:209: warning: mismatched indentations at 'end' with 'def' at 190
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:216: warning: mismatched indentations at 'end' with 'def' at 211
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:224: warning: mismatched indentations at 'end' with 'def' at 218
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/base_lowerer.rb:244: warning: mismatched indentations at 'end' with 'def' at 226
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/expression_lowerer.rb:38: warning: mismatched indentations at 'end' with 'def' at 25
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/expression_lowerer.rb:60: warning: mismatched indentations at 'end' with 'def' at 44
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/statement_lowerer.rb:30: warning: mismatched indentations at 'end' with 'def' at 23
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/statement_lowerer.rb:51: warning: mismatched indentations at 'end' with 'def' at 35
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/statement_lowerer.rb:89: warning: mismatched indentations at 'end' with 'def' at 56
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/type_lowerer.rb:37: warning: mismatched indentations at 'end' with 'def' at 10
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/type_lowerer.rb:62: warning: mismatched indentations at 'end' with 'def' at 39
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/type_lowerer.rb:128: warning: mismatched indentations at 'end' with 'def' at 64
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/function_lowerer.rb:27: warning: mismatched indentations at 'end' with 'def' at 10
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/function_lowerer.rb:93: warning: mismatched indentations at 'end' with 'def' at 29
/home/jenya/workspaces/mlc/lib/mlc/backend/codegen/function_lowerer.rb:105: warning: mismatched indentations at 'end' with 'def' at 95
/home/jenya/workspaces/mlc/lib/mlc.rb:83: warning: method redefined; discarding old parse
/home/jenya/workspaces/mlc/lib/mlc/compiler/stdlib/scanner.rb:10: warning: previous definition of parse was here
/home/jenya/workspaces/mlc/test/builder/formatting_modes_test.rb:24: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/builder/formatting_modes_test.rb:33: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/builder/roundtrip_test.rb:377: warning: method redefined; discarding old test_array_subscript
/home/jenya/workspaces/mlc/test/builder/roundtrip_test.rb:186: warning: previous definition of test_array_subscript was here
/home/jenya/workspaces/mlc/test/integration/generics_e2e_test.rb:315: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/integration/stdlib_simple_e2e_test.rb:69: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/integration/stdlib_simple_e2e_test.rb:70: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/integration/stdlib_simple_e2e_test.rb:103: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/integration/stdlib_simple_e2e_test.rb:104: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/integration/stdlib_simple_e2e_test.rb:152: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/mlc/enhanced_error_handling_test.rb:10: warning: assigned but unused variable - source
/home/jenya/workspaces/mlc/test/mlc/enhanced_error_handling_test.rb:94: warning: assigned but unused variable - e
/home/jenya/workspaces/mlc/test/mlc/enhanced_error_handling_test.rb:109: warning: assigned but unused variable - source
/home/jenya/workspaces/mlc/test/mlc/gcc_expression_strategy_test.rb:9: warning: assigned but unused variable - source
/home/jenya/workspaces/mlc/test/mlc/import_service_integration_test.rb:101: warning: assigned but unused variable - core_ir
/home/jenya/workspaces/mlc/test/mlc/import_service_integration_test.rb:160: warning: assigned but unused variable - core_ir
/home/jenya/workspaces/mlc/test/mlc/match_analyzer_test.rb:19: warning: assigned but unused variable - body_type
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:34: warning: assigned but unused variable - core_ir
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:52: warning: assigned but unused variable - core_ir
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:75: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:76: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:77: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:78: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:92: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:93: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/mlc/opaque_type_test.rb:112: warning: assigned but unused variable - core_ir
/home/jenya/workspaces/mlc/test/parsers/base_parser_test.rb:61: warning: ambiguous `/`; wrap regexp in parentheses or add a space after `/` operator
/home/jenya/workspaces/mlc/test/parsers/statement_parser_test.rb:23: warning: assigned but unused variable - trailing
/home/jenya/workspaces/mlc/test/parsers/statement_parser_test.rb:30: warning: assigned but unused variable - stmt
/home/jenya/workspaces/mlc/test/parsers/statement_parser_test.rb:64: warning: assigned but unused variable - stmt
/home/jenya/workspaces/mlc/test/parsers/statement_parser_test.rb:86: warning: assigned but unused variable - stmt
Loaded suite /home/jenya/.rbenv/versions/3.4.7/lib/ruby/gems/3.4.0/gems/rake-13.2.1/lib/rake/rake_test_loader
Started/home/jenya/workspaces/mlc/test/builder/dsl_v2/class_builder_test.rb:401: warning: the block passed to 'CppAst::Builder::ClassBuilder::ClassBuilder#friend_' defined at /home/jenya/workspaces/mlc/lib/cpp_ast/builder/class_builder.rb:64 may be ignored
/home/jenya/workspaces/mlc/test/builder/dsl_v2/dsl_v2_integration_test.rb:27: warning: the block passed to 'enum_' defined at /home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_v2_improved.rb:158 may be ignored
/home/jenya/workspaces/mlc/test/builder/dsl_v2/dsl_v2_integration_test.rb:260: warning: the block passed to 'requires_' defined at /home/jenya/workspaces/mlc/lib/cpp_ast/builder/dsl_v2_improved.rb:503 may be ignored

Finished in 0.028463896 seconds.
-------------------------------------------------------------------------------
153 tests, 530 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications
100% passed
-------------------------------------------------------------------------------
5375.23 tests/s, 18620.08 assertions/s
Run options: --seed 9428

# Running:

..............[cpp_function_rule_applied] name="banner" effects=[:noexcept]
[cpp_function_lowered] name="banner" effects=[:noexcept]
..............................................................................................[cpp_function_rule_applied] name="doubled" effects=[:noexcept]
[cpp_function_lowered] name="doubled" effects=[:noexcept]
.[cpp_function_rule_applied] name="main" effects=[:noexcept]
[cpp_function_lowered] name="main" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="unwrap_or" effects=[:noexcept]
[cpp_function_lowered] name="unwrap_or" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="parse" effects=[:noexcept]
[cpp_function_lowered] name="parse" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.....................[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
......................................................................................................[cpp_function_rule_applied] name="main" effects=[:noexcept]
[cpp_function_lowered] name="main" effects=[:noexcept]
.[cpp_function_rule_applied] name="main" effects=[:noexcept]
[cpp_function_lowered] name="main" effects=[:noexcept]
[cpp_function_rule_applied] name="second" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="second" effects=[:constexpr, :noexcept]
...............................[cpp_function_rule_applied] name="test_float" effects=[:noexcept]
[cpp_function_lowered] name="test_float" effects=[:noexcept]
[cpp_function_rule_applied] name="test_float2" effects=[:noexcept]
[cpp_function_lowered] name="test_float2" effects=[:noexcept]
.[cpp_function_rule_applied] name="test_int" effects=[:noexcept]
[cpp_function_lowered] name="test_int" effects=[:noexcept]
[cpp_function_rule_applied] name="test_int2" effects=[:noexcept]
[cpp_function_lowered] name="test_int2" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
......................................................................................................................[cpp_function_rule_applied] name="apply" effects=[:noexcept]
[cpp_function_lowered] name="apply" effects=[:noexcept]
..[cpp_function_rule_applied] name="main" effects=[:noexcept]
[cpp_function_lowered] name="main" effects=[:noexcept]
............................................[cpp_function_rule_applied] name="apply" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="apply" effects=[:constexpr, :noexcept]
..................................[cpp_function_rule_applied] name="id" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="id" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="multiply" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="multiply" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="divide" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="divide" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="add" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="add" effects=[:constexpr, :noexcept]
....................................................................................F...................[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="process" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="process" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.........[cpp_function_rule_applied] name="calculate" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="calculate" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="distance" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="distance" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="greet" effects=[:noexcept]
[cpp_function_lowered] name="greet" effects=[:noexcept]
.[cpp_function_rule_applied] name="compute" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="compute" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="helper" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="helper" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="main" effects=[:noexcept]
[cpp_function_lowered] name="main" effects=[:noexcept]
.....................................................................[cpp_function_rule_applied] name="test_arrays" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_arrays" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="test_simple_math" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_simple_math" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_string_concat" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_string_concat" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_builtins" effects=[:noexcept]
[cpp_function_lowered] name="test_builtins" effects=[:noexcept]
.[cpp_function_rule_applied] name="test_strings" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_strings" effects=[:constexpr, :noexcept]
..........................[cpp_function_rule_applied] name="double" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="double" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
............[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="count" effects=[:noexcept]
[cpp_function_lowered] name="count" effects=[:noexcept]
....................................................................................................[cpp_function_rule_applied] name="greet" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="greet" effects=[:constexpr, :noexcept]
Generated C++:
#include "mlc_match.hpp"
constexpr mlc::String greet(mlc::String name) noexcept{return mlc::String("Hello, ") + name + mlc::String("!");}
.[cpp_function_rule_applied] name="process" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="process" effects=[:constexpr, :noexcept]
Generated C++:
#include "mlc_match.hpp"
constexpr mlc::String process(mlc::String text) noexcept{return text.trim().upper();}
.[cpp_function_rule_applied] name="greet" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="greet" effects=[:constexpr, :noexcept]
Generated C++:
#include "mlc_match.hpp"
constexpr mlc::String greet(mlc::String name) noexcept{return mlc::String("Hello, {name}!");}
........................[cpp_function_rule_applied] name="safe_div" effects=[:noexcept]
[cpp_function_lowered] name="safe_div" effects=[:noexcept]
[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_unwrap_ok" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_unwrap_ok" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_unwrap_err" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_unwrap_err" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="double" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="double" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_map" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_map" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="to_upper" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="to_upper" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_ok" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_ok" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_err" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_err" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="recover" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="recover" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="compute" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="compute" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="answer" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="answer" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="direct" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="direct" effects=[:constexpr, :noexcept]
...[cpp_function_rule_applied] name="double" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="double" effects=[:constexpr, :noexcept]
.................................................................................................[cpp_function_rule_applied] name="sum" effects=[:noexcept]
[cpp_function_lowered] name="sum" effects=[:noexcept]
.[cpp_function_rule_applied] name="process" effects=[:noexcept]
[cpp_function_lowered] name="process" effects=[:noexcept]
.......................................[cpp_function_rule_applied] name="positives" effects=[:noexcept]
[cpp_function_lowered] name="positives" effects=[:noexcept]
......................Generated buffer.hpp (50 lines):
namespace gtkgl::gl  {class VertexArray {
VertexArray() {
}
~VertexArray() {
}
VertexArray(const VertexArray& other) = delete;
VertexArray& operator=(const VertexArray& other) = delete;
VertexArray(VertexArray&& other) noexcept{
}
VertexArray& operator=(VertexArray&& other) noexcept{
}
void bind() const{
}
void unbind() const{
}
inline GLuint handle() const noexcept {
return vao_;
}
inline bool is_valid() const noexcept {
return vao_ != 0;
}
};
class Buffer {
enum class Type{Array = GL_ARRAY_BUFFER, ElementArray = GL_ELEMENT_ARRAY_BUFFER};
enum class Usage{Static = GL_STATIC_DRAW, Dynamic = GL_DYNAMIC_DRAW, Stream = GL_STREAM_DRAW};
explicit Buffer(Type type) {
}
~Buffer() {
}
Buffer(const Buffer& other) = delete;
Buffer& operator=(const Buffer& other) = delete;
Buffer(Buffer&& other) noexcept{
}
Buffer& operator=(Buffer&& other) noexcept{
}
void bind() const{
}
void unbind() const{
}
template <typename T>
void data(std::span<const T> data, Usage usage = Usage::Static) {
}
inline GLuint handle() const noexcept {
return buffer_;
}
inline bool is_valid() const noexcept {
return buffer_ != 0;
}
};
}
.Generated shader.hpp (56 lines):
namespace gtkgl::gl  {class Shader {
enum class Type{Vertex = GL_VERTEX_SHADER, Fragment = GL_FRAGMENT_SHADER, Geometry = GL_GEOMETRY_SHADER};
Shader(Type type, const std::string& source) {
}
~Shader() {
}
Shader(const Shader& other) = delete;
Shader& operator=(const Shader& other) = delete;
Shader(Shader&& other) noexcept{
}
Shader& operator=(Shader&& other) noexcept{
}
inline GLuint handle() const noexcept {
return shader_;
}
inline bool is_valid() const noexcept {
return shader_ != 0;
}
std::optional<std::string> compile_error() const{
}
};
class ShaderProgram {
ShaderProgram() {
}
~ShaderProgram() {
}
ShaderProgram(const ShaderProgram& other) = delete;
ShaderProgram& operator=(const ShaderProgram& other) = delete;
ShaderProgram(ShaderProgram&& other) noexcept{
}
ShaderProgram& operator=(ShaderProgram&& other) noexcept{
}
void attach(const Shader& shader) {
}
bool link() {
}
void use() const{
}
inline GLuint handle() const noexcept {
return program_;
}
inline bool is_valid() const noexcept {
return program_ != 0;
}
std::optional<std::string> link_error() const{
}
void set_uniform(const std::string& name, int value) const{
}
void set_uniform(const std::string& name, float value) const{
}
void set_uniform(const std::string& name, float x, float y, float z) const{
}
void set_uniform(const std::string& name, std::span<const float> values) const{
}
};
}
.Generated text_types.hpp (59 lines):
namespace gtkgl::text  {using GlyphIndex = uint32_t;
using FontFaceID = uint32_t;
using AtlasPageID = uint32_t;
using TextureID = uint32_t;
struct Vec2 {
x float{0.0f};
y float{0.0f};
Vec2() = default;
constexpr Vec2(float x_, float y_) : x(x_), y(y_){
}
Vec2 operator+(const Vec2& other) const{
}
Vec2 operator-(const Vec2& other) const{
}
Vec2 operator*(float s) const{
}
Vec2& operator+=(const Vec2& other) {
}
};
struct Rect {
x float{0.0f};
y float{0.0f};
width float{0.0f};
height float{0.0f};
Rect() = default;
constexpr Rect(float x_, float y_, float w_, float h_) : x(x_), y(y_), width(w_), height(h_){
}
bool contains(float px, float py) const{
}
float area() const{
}
};
struct Color {
r float{1.0f};
g float{1.0f};
b float{1.0f};
a float{1.0f};
Color() = default;
constexpr Color(float r_, float g_, float b_, float a_) : r(r_), g(g_), b(b_), a(a_){
}
static constexpr inline Color white()  {
return auto{1.0, 1.0, 1.0, 1.0};
}
static constexpr inline Color black()  {
return auto{0.0, 0.0, 0.0, 1.0};
}
static constexpr inline Color red()  {
return auto{1.0, 0.0, 0.0, 1.0};
}
static constexpr inline Color green()  {
return auto{0.0, 1.0, 0.0, 1.0};
}
static constexpr inline Color blue()  {
return auto{0.0, 0.0, 1.0, 1.0};
}
};
enum class AtlasFormat : uint8_t{A8, RGB8, RGBA8};
enum class RenderMode : uint8_t{BITMAP, MSDF, SDF};
}
.✅ All 13 major OpenGL constructs supported
.....[cpp_function_rule_applied] name="add" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="add" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="unwrap_or" effects=[:noexcept]
[cpp_function_lowered] name="unwrap_or" effects=[:noexcept]
................[cpp_function_rule_applied] name="test_exists" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_exists" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_file_exists" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_file_exists" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_remove" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_remove" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_delete" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_delete" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_rename" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_rename" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_move" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_move" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_read_string" effects=[:noexcept]
[cpp_function_lowered] name="test_read_string" effects=[:noexcept]
[cpp_function_rule_applied] name="test_read_lines" effects=[:noexcept]
[cpp_function_lowered] name="test_read_lines" effects=[:noexcept]
[cpp_function_rule_applied] name="test_read_text" effects=[:noexcept]
[cpp_function_lowered] name="test_read_text" effects=[:noexcept]
.[cpp_function_rule_applied] name="process_file" effects=[:noexcept]
[cpp_function_lowered] name="process_file" effects=[:noexcept]
.[cpp_function_rule_applied] name="test_append_string" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_append_string" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_append_line" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_append_line" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_append_text" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_append_text" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="backup_file" effects=[:noexcept]
[cpp_function_lowered] name="backup_file" effects=[:noexcept]
.[cpp_function_rule_applied] name="test_write_string" effects=[:noexcept]
[cpp_function_lowered] name="test_write_string" effects=[:noexcept]
[cpp_function_rule_applied] name="test_write_lines" effects=[:noexcept]
[cpp_function_lowered] name="test_write_lines" effects=[:noexcept]
[cpp_function_rule_applied] name="test_write_text" effects=[:noexcept]
[cpp_function_lowered] name="test_write_text" effects=[:noexcept]
.[cpp_function_rule_applied] name="test_safe_remove" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_safe_remove" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_safe_rename" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_safe_rename" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_safe_write" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_safe_write" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_safe_write_lines" effects=[:noexcept]
[cpp_function_lowered] name="test_safe_write_lines" effects=[:noexcept]
[cpp_function_rule_applied] name="test_safe_append" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_safe_append" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_safe_read" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_safe_read" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_safe_read_lines" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_safe_read_lines" effects=[:constexpr, :noexcept]
......................✅ All 11 major OpenGL constructs supported for 100% coverage
..[cpp_function_rule_applied] name="unwrap" effects=[:noexcept]
[cpp_function_lowered] name="unwrap" effects=[:noexcept]
....[cpp_function_rule_applied] name="handle" effects=[:noexcept]
[cpp_function_lowered] name="handle" effects=[:noexcept]
.......................................[cpp_function_rule_applied] name="safe_div" effects=[:noexcept]
[cpp_function_lowered] name="safe_div" effects=[:noexcept]
[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="double" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="double" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_map" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_map" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="test_unwrap_some" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_unwrap_some" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_unwrap_none" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_unwrap_none" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test_some" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_some" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test_none" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test_none" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.............................[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="main" effects=[:noexcept]
[cpp_function_lowered] name="main" effects=[:noexcept]
..[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="handle" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="handle" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
....[cpp_function_rule_applied] name="add" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="add" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.....................EEE[cpp_function_rule_applied] name="countdown" effects=[:noexcept]
[cpp_function_lowered] name="countdown" effects=[:noexcept]
.E[cpp_function_rule_applied] name="compute" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="compute" effects=[:constexpr, :noexcept]
.............................................[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="parse_and_format" effects=[:noexcept]
[cpp_function_lowered] name="parse_and_format" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="test" effects=[:noexcept]
[cpp_function_lowered] name="test" effects=[:noexcept]
.[cpp_function_rule_applied] name="process" effects=[:noexcept]
[cpp_function_lowered] name="process" effects=[:noexcept]
..............[cpp_function_rule_applied] name="add" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="add" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="make_point" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="make_point" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="add" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="add" effects=[:constexpr, :noexcept]
..[cpp_function_rule_applied] name="square" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="square" effects=[:constexpr, :noexcept]
......................[cpp_function_rule_applied] name="main" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="main" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="value" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="value" effects=[:constexpr, :noexcept]
.[cpp_function_rule_applied] name="flag" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="flag" effects=[:constexpr, :noexcept]
.....................................................................................................[cpp_function_rule_applied] name="test" effects=[:constexpr, :noexcept]
[cpp_function_lowered] name="test" effects=[:constexpr, :noexcept]
.E.......DEPRECATED: Use assert_nil if expecting nil from /home/jenya/workspaces/mlc/test/mlc/backends/string_helpers_equivalence_test.rb:46. This will fail in Minitest 6.
................................................................................[cpp_function_rule_applied] name="main" effects=[:noexcept]
[cpp_function_lowered] name="main" effects=[:noexcept]
........................✅ All 12 major OpenGL features fully implemented without simplifications
......S................

Finished in 260.186838s, 5.9188 runs/s, 15.6195 assertions/s.

  1) Failure:
ApplicationTest#test_builds_services [test/mlc/application_test.rb:13]:
Expected #<MLC::Backends::Cpp::LegacyAdapter:0x00007c446608a788 @legacy_backend=#<MLC::Backend::CodeGen:0x00007c446641d0d0 @type_registry=#<MLC::Core::TypeRegistry:0x00007c446611da38 @types={"bool" => #<MLC::Core::TypeInfo:0x00007c44664144d0 @name="bool", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d9c0 @origin=nil, @kind=:prim, @name="bool">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="bool">, "void" => #<MLC::Core::TypeInfo:0x00007c44664141b0 @name="void", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d790 @origin=nil, @kind=:prim, @name="void">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="void">, "unit" => #<MLC::Core::TypeInfo:0x00007c4466413df0 @name="unit", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d560 @origin=nil, @kind=:prim, @name="unit">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="void">, "i8" => #<MLC::Core::TypeInfo:0x00007c4466413ad0 @name="i8", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d3f8 @origin=nil, @kind=:prim, @name="i8">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int8_t">, "u8" => #<MLC::Core::TypeInfo:0x00007c44664135d0 @name="u8", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d1f0 @origin=nil, @kind=:prim, @name="u8">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint8_t">, "i16" => #<MLC::Core::TypeInfo:0x00007c4466411d70 @name="i16", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611cf98 @origin=nil, @kind=:prim, @name="i16">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int16_t">, "u16" => #<MLC::Core::TypeInfo:0x00007c44664117d0 @name="u16", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ce58 @origin=nil, @kind=:prim, @name="u16">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint16_t">, "i32" => #<MLC::Core::TypeInfo:0x00007c446641fb50 @name="i32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ccf0 @origin=nil, @kind=:prim, @name="i32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int">, "u32" => #<MLC::Core::TypeInfo:0x00007c446641f010 @name="u32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611cbd8 @origin=nil, @kind=:prim, @name="u32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint32_t">, "i64" => #<MLC::Core::TypeInfo:0x00007c446641ec50 @name="i64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ca70 @origin=nil, @kind=:prim, @name="i64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int64_t">, "u64" => #<MLC::Core::TypeInfo:0x00007c446641e430 @name="u64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c930 @origin=nil, @kind=:prim, @name="u64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint64_t">, "f32" => #<MLC::Core::TypeInfo:0x00007c446641e110 @name="f32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c6b0 @origin=nil, @kind=:prim, @name="f32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="float">, "f64" => #<MLC::Core::TypeInfo:0x00007c446641de90 @name="f64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c368 @origin=nil, @kind=:prim, @name="f64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="double">, "usize" => #<MLC::Core::TypeInfo:0x00007c446641dc10 @name="usize", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611bdc8 @origin=nil, @kind=:prim, @name="usize">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="size_t">, "str" => #<MLC::Core::TypeInfo:0x00007c446641d990 @name="str", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611bc60 @origin=nil, @kind=:prim, @name="str">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::String">, "string" => #<MLC::Core::TypeInfo:0x00007c446641d710 @name="string", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611aa68 @origin=nil, @kind=:prim, @name="string">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::String">, "regex" => #<MLC::Core::TypeInfo:0x00007c446641d490 @name="regex", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611a900 @origin=nil, @kind=:prim, @name="regex">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::Regex">}, @namespaces={}, @modules={}>, @function_registry=nil, @type_map={"i8" => "int8_t", "u8" => "uint8_t", "i16" => "int16_t", "u16" => "uint16_t", "i32" => "int", "u32" => "uint32_t", "i64" => "int64_t", "u64" => "uint64_t", "usize" => "size_t", "f32" => "float", "f64" => "double", "bool" => "bool", "void" => "void", "str" => "mlc::String", "string" => "mlc::String", "regex" => "mlc::Regex"}, @stdlib_scanner=#<MLC::Compiler::StdlibScanner:0x00007c446608a9b8 @stdlib_dir="/home/jenya/workspaces/mlc/lib/mlc/stdlib", @modules={}, @function_map={}, @scanned=false>, @rule_engine=#<MLC::Rules::RuleEngine:0x00007c446600e098 @registry={expression: [#<MLC::SemanticGen::Rules::LiteralRule:0x00007c446600cd38>, #<MLC::SemanticGen::Rules::VarRefRule:0x00007c446600ccc0>, #<MLC::SemanticGen::Rules::LetRule:0x00007c446600cbf8>, #<MLC::SemanticGen::Rules::RecordLiteralRule:0x00007c446600ca68>, #<MLC::SemanticGen::Rules::ArrayLiteralRule:0x00007c446600c900>, #<MLC::SemanticGen::Rules::IfRule:0x00007c446600c720>, #<MLC::SemanticGen::Rules::MatchRule:0x00007c446600c310>, #<MLC::SemanticGen::Rules::ForLoopRule:0x00007c446600c040>, #<MLC::SemanticGen::Rules::WhileLoopRule:0x00007c446600bc58>, #<MLC::SemanticGen::Rules::LambdaRule:0x00007c446600ab28>, #<MLC::SemanticGen::Rules::ListComprehensionRule:0x00007c446600a470>, #<MLC::SemanticGen::Rules::IndexAccessRule:0x00007c44660095e8>, #<MLC::SemanticGen::Rules::CallRule:0x00007c4466008a80>, #<MLC::SemanticGen::Rules::UnaryRule:0x00007c4466007fe0>, #<MLC::SemanticGen::Rules::BinaryRule:0x00007c44660065c8>, #<MLC::SemanticGen::Rules::BlockRule:0x00007c4466004d40>, #<MLC::SemanticGen::Rules::DoRule:0x00007c4466002770>, #<MLC::SemanticGen::Rules::ModuleMemberRule:0x00007c44660014d8>, #<MLC::SemanticGen::Rules::MemberRule:0x00007c4466000128>], statement: [#<MLC::SemanticGen::Rules::Statements::ExprStmtRule:0x00007c44660000d8>, #<MLC::SemanticGen::Rules::Statements::VariableDeclRule:0x00007c446611ffb8>, #<MLC::SemanticGen::Rules::Statements::ReturnRule:0x00007c446611fef0>, #<MLC::SemanticGen::Rules::Statements::AssignmentRule:0x00007c446611fd60>, #<MLC::SemanticGen::Rules::Statements::BreakRule:0x00007c446611fb80>, #<MLC::SemanticGen::Rules::Statements::ContinueRule:0x00007c446611f888>, #<MLC::SemanticGen::Rules::Statements::IfRule:0x00007c446611f400>, #<MLC::SemanticGen::Rules::Statements::ForRule:0x00007c446611ebb8>, #<MLC::SemanticGen::Rules::Statements::WhileRule:0x00007c446611e370>], core_ir_function: [#<MLC::SemanticGen::Rules::FunctionEffectRule:0x00007c446611e2d0>], cpp_expression: [#<MLC::Rules::CodeGen::Expression::LiteralRule:0x00007c446611a338>, #<MLC::Rules::CodeGen::Expression::VarRefRule:0x00007c446611a2e8>, #<MLC::Rules::CodeGen::Expression::BinaryRule:0x00007c446611a298>, #<MLC::Rules::CodeGen::Expression::UnaryRule:0x00007c446611a248>, #<MLC::Rules::CodeGen::Expression::CallRule:0x00007c446611a1f8>, #<MLC::Rules::CodeGen::Expression::RegexRule:0x00007c446611a1a8>, #<MLC::Rules::CodeGen::Expression::MemberRule:0x00007c446611a158>, #<MLC::Rules::CodeGen::Expression::IndexRule:0x00007c446611a0e0>, #<MLC::Rules::CodeGen::Expression::ArrayLiteralRule:0x00007c446611a0b8>, #<MLC::Rules::CodeGen::Expression::RecordRule:0x00007c446611a040>, #<MLC::Rules::CodeGen::Expression::IfRule:0x00007c4466119ff0>, #<MLC::Rules::CodeGen::Expression::BlockRule:0x00007c4466119fa0>, #<MLC::Rules::CodeGen::Expression::LambdaRule:0x00007c4466119f78>, #<MLC::Rules::CodeGen::Expression::MatchRule:0x00007c4466119f00>, #<MLC::Rules::CodeGen::Expression::ListCompRule:0x00007c4466119e60>], cpp_function_declaration: [#<MLC::Backend::CodeGen::Rules::FunctionRule:0x00007c446611a590>], cpp_statement: [#<MLC::Rules::CodeGen::Statement::ExprStatementRule:0x00007c4466119e38>, #<MLC::Rules::CodeGen::Statement::VariableDeclRule:0x00007c4466119dc0>, #<MLC::Rules::CodeGen::Statement::AssignmentRule:0x00007c4466119d98>, #<MLC::Rules::CodeGen::Statement::ReturnRule:0x00007c4466119d48>, #<MLC::Rules::CodeGen::Statement::BreakRule:0x00007c4466119cd0>, #<MLC::Rules::CodeGen::Statement::ContinueRule:0x00007c4466119ca8>, #<MLC::Rules::CodeGen::Statement::IfRule:0x00007c4466119c08>, #<MLC::Rules::CodeGen::Statement::WhileRule:0x00007c4466119bb8>, #<MLC::Rules::CodeGen::Statement::ForRule:0x00007c4466119b68>, #<MLC::Rules::CodeGen::Statement::MatchRule:0x00007c4466119b40>, #<MLC::Rules::CodeGen::Statement::BlockRule:0x00007c4466119910>]}>, @event_bus=#<MLC::Infrastructure::EventBus:0x00007c446600e6d8 @handlers={stdlib_function_imported: [#<Proc:0x00007c446600e5e8 /home/jenya/workspaces/mlc/lib/mlc/diagnostics/event_logger.rb:17>], stdlib_type_imported: [#<Proc:0x00007c446600e570 /home/jenya/workspaces/mlc/lib/mlc/diagnostics/event_logger.rb:17>], stdlib_missing_item: [#<Proc:0x00007c446600e390 /home/jenya/workspaces/mlc/lib/mlc/diagnostics/event_logger.rb:17>], type_mismatch: [#<Proc:0x00007c446600e250 /home/jenya/workspaces/mlc/lib/mlc/diagnostics/event_logger.rb:17>], cpp_function_rule_applied: [#<Proc:0x00007c446600e1b0 /home/jenya/workspaces/mlc/lib/mlc/diagnostics/event_logger.rb:17>], cpp_function_lowered: [#<Proc:0x00007c446600e110 /home/jenya/workspaces/mlc/lib/mlc/diagnostics/event_logger.rb:17>]}, @min_level=:debug>, @runtime_policy=#<MLC::Backend::RuntimePolicy:0x00007c446608a648 @block_expr_simple_strategy=:iife, @block_expr_complex_strategy=:iife, @if_join_strategy=:ternary, @match_threshold=5, @loop_capture_strategy=:lambda, @use_gcc_extensions=false, @error_model=:expected, @always_use_runtime=true>>, @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 @type_registry=#<MLC::Core::TypeRegistry:0x00007c446611da38 @types={"bool" => #<MLC::Core::TypeInfo:0x00007c44664144d0 @name="bool", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d9c0 @origin=nil, @kind=:prim, @name="bool">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="bool">, "void" => #<MLC::Core::TypeInfo:0x00007c44664141b0 @name="void", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d790 @origin=nil, @kind=:prim, @name="void">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="void">, "unit" => #<MLC::Core::TypeInfo:0x00007c4466413df0 @name="unit", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d560 @origin=nil, @kind=:prim, @name="unit">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="void">, "i8" => #<MLC::Core::TypeInfo:0x00007c4466413ad0 @name="i8", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d3f8 @origin=nil, @kind=:prim, @name="i8">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int8_t">, "u8" => #<MLC::Core::TypeInfo:0x00007c44664135d0 @name="u8", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d1f0 @origin=nil, @kind=:prim, @name="u8">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint8_t">, "i16" => #<MLC::Core::TypeInfo:0x00007c4466411d70 @name="i16", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611cf98 @origin=nil, @kind=:prim, @name="i16">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int16_t">, "u16" => #<MLC::Core::TypeInfo:0x00007c44664117d0 @name="u16", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ce58 @origin=nil, @kind=:prim, @name="u16">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint16_t">, "i32" => #<MLC::Core::TypeInfo:0x00007c446641fb50 @name="i32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ccf0 @origin=nil, @kind=:prim, @name="i32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int">, "u32" => #<MLC::Core::TypeInfo:0x00007c446641f010 @name="u32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611cbd8 @origin=nil, @kind=:prim, @name="u32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint32_t">, "i64" => #<MLC::Core::TypeInfo:0x00007c446641ec50 @name="i64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ca70 @origin=nil, @kind=:prim, @name="i64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int64_t">, "u64" => #<MLC::Core::TypeInfo:0x00007c446641e430 @name="u64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c930 @origin=nil, @kind=:prim, @name="u64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint64_t">, "f32" => #<MLC::Core::TypeInfo:0x00007c446641e110 @name="f32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c6b0 @origin=nil, @kind=:prim, @name="f32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="float">, "f64" => #<MLC::Core::TypeInfo:0x00007c446641de90 @name="f64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c368 @origin=nil, @kind=:prim, @name="f64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="double">, "usize" => #<MLC::Core::TypeInfo:0x00007c446641dc10 @name="usize", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611bdc8 @origin=nil, @kind=:prim, @name="usize">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="size_t">, "str" => #<MLC::Core::TypeInfo:0x00007c446641d990 @name="str", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611bc60 @origin=nil, @kind=:prim, @name="str">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::String">, "string" => #<MLC::Core::TypeInfo:0x00007c446641d710 @name="string", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611aa68 @origin=nil, @kind=:prim, @name="string">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::String">, "regex" => #<MLC::Core::TypeInfo:0x00007c446641d490 @name="regex", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611a900 @origin=nil, @kind=:prim, @name="regex">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::Regex">}, @namespaces={}, @modules={}>, @function_registry=nil, @stdlib_scanner=#<MLC::Compiler::StdlibScanner:0x00007c446608a9b8 @stdlib_dir="/home/jenya/workspaces/mlc/lib/mlc/stdlib", @modules={}, @function_map={}, @scanned=false>, @type_map={"i8" => "int8_t", "u8" => "uint8_t", "i16" => "int16_t", "u16" => "uint16_t", "i32" => "int", "u32" => "uint32_t", "i64" => "int64_t", "u64" => "uint64_t", "usize" => "size_t", "f32" => "float", "f64" => "double", "bool" => "bool", "void" => "void", "str" => "mlc::String", "string" => "mlc::String", "regex" => "mlc::Regex"}, @runtime_policy=#<MLC::Backend::RuntimePolicy:0x00007c446608a4b8 @block_expr_simple_strategy=:iife, @block_expr_complex_strategy=:iife, @if_join_strategy=:ternary, @match_threshold=5, @loop_capture_strategy=:lambda, @use_gcc_extensions=false, @error_model=:expected, @always_use_runtime=true>, @services={}, @rule_engine=#<MLC::Backends::Cpp::Services::RuleEngine:0x00007c4466119848 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>, @expression_rules=[#<MLC::Backends::Cpp::Rules::Expressions::VarRefRule:0x00007c4466119528 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::LiteralRule:0x00007c4466119398 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::RegexRule:0x00007c44661190a0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::UnaryRule:0x00007c4466119078 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::BinaryRule:0x00007c4466119050 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::IndexRule:0x00007c4466119028 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::MemberRule:0x00007c4466118920 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::ArrayLiteralRule:0x00007c4466118498 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::RecordRule:0x00007c4466118448 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::LambdaRule:0x00007c4466118420 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::IfRule:0x00007c44661183d0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::BlockRule:0x00007c4466118380 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::MatchRule:0x00007c4466118330 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::CallRule:0x00007c4466117fe8 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Expressions::ListCompRule:0x00007c4466117de0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>], @statement_rules=[#<MLC::Backends::Cpp::Rules::Statements::BreakRule:0x00007c4466117cf0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::ContinueRule:0x00007c4466117c00 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::ReturnRule:0x00007c4466117b10 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::ExprStatementRule:0x00007c4466117a20 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::AssignmentRule:0x00007c4466117930 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::VariableDeclRule:0x00007c4466117818 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::IfRule:0x00007c4466117570 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::WhileRule:0x00007c4466117110 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::ForRule:0x00007c44661170c0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::MatchRule:0x00007c4466117098 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>, #<MLC::Backends::Cpp::Rules::Statements::BlockRule:0x00007c44661163c8 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 ...>>>]>, @in_generic_function=false, @user_functions=#<Set: {}>>, @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 @container=#<MLC::Backends::Cpp::Container:0x00007c446641cf90 @type_registry=#<MLC::Core::TypeRegistry:0x00007c446611da38 @types={"bool" => #<MLC::Core::TypeInfo:0x00007c44664144d0 @name="bool", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d9c0 @origin=nil, @kind=:prim, @name="bool">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="bool">, "void" => #<MLC::Core::TypeInfo:0x00007c44664141b0 @name="void", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d790 @origin=nil, @kind=:prim, @name="void">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="void">, "unit" => #<MLC::Core::TypeInfo:0x00007c4466413df0 @name="unit", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d560 @origin=nil, @kind=:prim, @name="unit">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="void">, "i8" => #<MLC::Core::TypeInfo:0x00007c4466413ad0 @name="i8", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d3f8 @origin=nil, @kind=:prim, @name="i8">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int8_t">, "u8" => #<MLC::Core::TypeInfo:0x00007c44664135d0 @name="u8", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611d1f0 @origin=nil, @kind=:prim, @name="u8">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint8_t">, "i16" => #<MLC::Core::TypeInfo:0x00007c4466411d70 @name="i16", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611cf98 @origin=nil, @kind=:prim, @name="i16">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int16_t">, "u16" => #<MLC::Core::TypeInfo:0x00007c44664117d0 @name="u16", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ce58 @origin=nil, @kind=:prim, @name="u16">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint16_t">, "i32" => #<MLC::Core::TypeInfo:0x00007c446641fb50 @name="i32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ccf0 @origin=nil, @kind=:prim, @name="i32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int">, "u32" => #<MLC::Core::TypeInfo:0x00007c446641f010 @name="u32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611cbd8 @origin=nil, @kind=:prim, @name="u32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint32_t">, "i64" => #<MLC::Core::TypeInfo:0x00007c446641ec50 @name="i64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611ca70 @origin=nil, @kind=:prim, @name="i64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="int64_t">, "u64" => #<MLC::Core::TypeInfo:0x00007c446641e430 @name="u64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c930 @origin=nil, @kind=:prim, @name="u64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="uint64_t">, "f32" => #<MLC::Core::TypeInfo:0x00007c446641e110 @name="f32", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c6b0 @origin=nil, @kind=:prim, @name="f32">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="float">, "f64" => #<MLC::Core::TypeInfo:0x00007c446641de90 @name="f64", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611c368 @origin=nil, @kind=:prim, @name="f64">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="double">, "usize" => #<MLC::Core::TypeInfo:0x00007c446641dc10 @name="usize", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611bdc8 @origin=nil, @kind=:prim, @name="usize">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="size_t">, "str" => #<MLC::Core::TypeInfo:0x00007c446641d990 @name="str", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611bc60 @origin=nil, @kind=:prim, @name="str">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::String">, "string" => #<MLC::Core::TypeInfo:0x00007c446641d710 @name="string", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611aa68 @origin=nil, @kind=:prim, @name="string">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::String">, "regex" => #<MLC::Core::TypeInfo:0x00007c446641d490 @name="regex", @ast_node=nil, @core_ir_type=#<MLC::SemanticIR::Type:0x00007c446611a900 @origin=nil, @kind=:prim, @name="regex">, @namespace=nil, @kind=:primitive, @exported=false, @module_name=nil, @fields=nil, @variants=nil, @referenced_type_names=[], @cpp_name="mlc::Regex">}, @namespaces={}, @modules={}>, @function_registry=nil, @stdlib_scanner=#<MLC::Compiler::StdlibScanner:0x00007c446608a9b8 @stdlib_dir="/home/jenya/workspaces/mlc/lib/mlc/stdlib", @modules={}, @function_map={}, @scanned=false>, @type_map={"i8" => "int8_t", "u8" => "uint8_t", "i16" => "int16_t", "u16" => "uint16_t", "i32" => "int", "u32" => "uint32_t", "i64" => "int64_t", "u64" => "uint64_t", "usize" => "size_t", "f32" => "float", "f64" => "double", "bool" => "bool", "void" => "void", "str" => "mlc::String", "string" => "mlc::String", "regex" => "mlc::Regex"}, @runtime_policy=#<MLC::Backend::RuntimePolicy:0x00007c446608a4b8 @block_expr_simple_strategy=:iife, @block_expr_complex_strategy=:iife, @if_join_strategy=:ternary, @match_threshold=5, @loop_capture_strategy=:lambda, @use_gcc_extensions=false, @error_model=:expected, @always_use_runtime=true>, @services={}, @rule_engine=#<MLC::Backends::Cpp::Services::RuleEngine:0x00007c4466119848 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>, @expression_rules=[#<MLC::Backends::Cpp::Rules::Expressions::VarRefRule:0x00007c4466119528 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::LiteralRule:0x00007c4466119398 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::RegexRule:0x00007c44661190a0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::UnaryRule:0x00007c4466119078 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::BinaryRule:0x00007c4466119050 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::IndexRule:0x00007c4466119028 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::MemberRule:0x00007c4466118920 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::ArrayLiteralRule:0x00007c4466118498 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::RecordRule:0x00007c4466118448 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::LambdaRule:0x00007c4466118420 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::IfRule:0x00007c44661183d0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::BlockRule:0x00007c4466118380 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::MatchRule:0x00007c4466118330 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::CallRule:0x00007c4466117fe8 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Expressions::ListCompRule:0x00007c4466117de0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>], @statement_rules=[#<MLC::Backends::Cpp::Rules::Statements::BreakRule:0x00007c4466117cf0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::ContinueRule:0x00007c4466117c00 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::ReturnRule:0x00007c4466117b10 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::ExprStatementRule:0x00007c4466117a20 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::AssignmentRule:0x00007c4466117930 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::VariableDeclRule:0x00007c4466117818 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::IfRule:0x00007c4466117570 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::WhileRule:0x00007c4466117110 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::ForRule:0x00007c44661170c0 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::MatchRule:0x00007c4466117098 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>, #<MLC::Backends::Cpp::Rules::Statements::BlockRule:0x00007c44661163c8 @context=#<MLC::Backends::Cpp::Context:0x00007c4466119870 ...>>]>, @in_generic_function=false, @user_functions=#<Set: {}>>>, @in_generic_function=false> to be an instance of MLC::Backend::CodeGen, not MLC::Backends::Cpp::LegacyAdapter.

  2) Error:
MLCControlFlowStatementTest#test_break_and_continue_inside_loop:
ArgumentError: missing keyword: :then_statement
    lib/mlc/backends/cpp/services/builders/cpp_ast_factory.rb:194:in 'if_statement'
    lib/mlc/backends/cpp/rules/statements/if_rule.rb:24:in 'MLC::Backends::Cpp::Rules::Statements::IfRule#apply'
    lib/mlc/backends/cpp/services/rule_engine.rb:43:in 'MLC::Backends::Cpp::Services::RuleEngine#lower_statement'
    lib/mlc/backends/cpp/context.rb:147:in 'MLC::Backends::Cpp::Context#lower_statement'
    lib/mlc/backends/cpp/rules/statements/block_rule.rb:27:in 'block in MLC::Backends::Cpp::Rules::Statements::BlockRule#apply'
    lib/mlc/backends/cpp/rules/statements/block_rule.rb:19:in 'Array#each'
    lib/mlc/backends/cpp/rules/statements/block_rule.rb:19:in 'MLC::Backends::Cpp::Rules::Statements::BlockRule#apply'
    lib/mlc/backends/cpp/services/rule_engine.rb:43:in 'MLC::Backends::Cpp::Services::RuleEngine#lower_statement'
    lib/mlc/backends/cpp/context.rb:147:in 'MLC::Backends::Cpp::Context#lower_statement'
    lib/mlc/backends/cpp/rules/statements/for_rule.rb:52:in 'MLC::Backends::Cpp::Rules::Statements::ForRule#lower_for_body'
    lib/mlc/backends/cpp/rules/statements/for_rule.rb:28:in 'MLC::Backends::Cpp::Rules::Statements::ForRule#apply'
    lib/mlc/backends/cpp/services/rule_engine.rb:43:in 'MLC::Backends::Cpp::Services::RuleEngine#lower_statement'
    lib/mlc/backends/cpp/context.rb:147:in 'MLC::Backends::Cpp::Context#lower_statement'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_block_expr_statements'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'Array#map'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'MLC::Backends::Cpp::LegacyAdapter#lower_block_expr_statements'
    lib/mlc/backends/cpp/legacy_adapter.rb:103:in 'MLC::Backends::Cpp::LegacyAdapter#lower_function'
    lib/mlc/backends/cpp/legacy_adapter.rb:54:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc/backends/cpp/legacy_adapter.rb:79:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Array#each'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Enumerable#flat_map'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:52:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc.rb:77:in 'MLC.compile'
    lib/mlc.rb:133:in 'MLC.to_cpp'
    test/mlc/control_flow_statement_test.rb:87:in 'MLCControlFlowStatementTest#test_break_and_continue_inside_loop'

  3) Error:
MLCControlFlowStatementTest#test_return_without_expression_in_void_function:
ArgumentError: missing keyword: :then_statement
    lib/mlc/backends/cpp/services/builders/cpp_ast_factory.rb:194:in 'if_statement'
    lib/mlc/backends/cpp/rules/statements/if_rule.rb:24:in 'MLC::Backends::Cpp::Rules::Statements::IfRule#apply'
    lib/mlc/backends/cpp/services/rule_engine.rb:43:in 'MLC::Backends::Cpp::Services::RuleEngine#lower_statement'
    lib/mlc/backends/cpp/context.rb:147:in 'MLC::Backends::Cpp::Context#lower_statement'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_block_expr_statements'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'Array#map'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'MLC::Backends::Cpp::LegacyAdapter#lower_block_expr_statements'
    lib/mlc/backends/cpp/legacy_adapter.rb:103:in 'MLC::Backends::Cpp::LegacyAdapter#lower_function'
    lib/mlc/backends/cpp/legacy_adapter.rb:54:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc/backends/cpp/legacy_adapter.rb:79:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Array#each'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Enumerable#flat_map'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:52:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc.rb:77:in 'MLC.compile'
    lib/mlc.rb:133:in 'MLC.to_cpp'
    test/mlc/control_flow_statement_test.rb:102:in 'MLCControlFlowStatementTest#test_return_without_expression_in_void_function'

  4) Error:
MLCControlFlowStatementTest#test_return_statement_in_block:
ArgumentError: missing keyword: :then_statement
    lib/mlc/backends/cpp/services/builders/cpp_ast_factory.rb:194:in 'if_statement'
    lib/mlc/backends/cpp/rules/statements/if_rule.rb:24:in 'MLC::Backends::Cpp::Rules::Statements::IfRule#apply'
    lib/mlc/backends/cpp/services/rule_engine.rb:43:in 'MLC::Backends::Cpp::Services::RuleEngine#lower_statement'
    lib/mlc/backends/cpp/context.rb:147:in 'MLC::Backends::Cpp::Context#lower_statement'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_block_expr_statements'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'Array#map'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'MLC::Backends::Cpp::LegacyAdapter#lower_block_expr_statements'
    lib/mlc/backends/cpp/legacy_adapter.rb:103:in 'MLC::Backends::Cpp::LegacyAdapter#lower_function'
    lib/mlc/backends/cpp/legacy_adapter.rb:54:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc/backends/cpp/legacy_adapter.rb:79:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Array#each'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Enumerable#flat_map'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:52:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc.rb:77:in 'MLC.compile'
    lib/mlc.rb:133:in 'MLC.to_cpp'
    test/mlc/control_flow_statement_test.rb:66:in 'MLCControlFlowStatementTest#test_return_statement_in_block'

  5) Error:
MLCControlFlowStatementTest#test_if_statement_generates_cpp_if:
ArgumentError: missing keyword: :then_statement
    lib/mlc/backends/cpp/services/builders/cpp_ast_factory.rb:194:in 'if_statement'
    lib/mlc/backends/cpp/rules/statements/if_rule.rb:24:in 'MLC::Backends::Cpp::Rules::Statements::IfRule#apply'
    lib/mlc/backends/cpp/services/rule_engine.rb:43:in 'MLC::Backends::Cpp::Services::RuleEngine#lower_statement'
    lib/mlc/backends/cpp/context.rb:147:in 'MLC::Backends::Cpp::Context#lower_statement'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_block_expr_statements'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'Array#map'
    lib/mlc/backends/cpp/legacy_adapter.rb:163:in 'MLC::Backends::Cpp::LegacyAdapter#lower_block_expr_statements'
    lib/mlc/backends/cpp/legacy_adapter.rb:103:in 'MLC::Backends::Cpp::LegacyAdapter#lower_function'
    lib/mlc/backends/cpp/legacy_adapter.rb:54:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc/backends/cpp/legacy_adapter.rb:79:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Array#each'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Enumerable#flat_map'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:52:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc.rb:77:in 'MLC.compile'
    lib/mlc.rb:133:in 'MLC.to_cpp'
    test/mlc/control_flow_statement_test.rb:32:in 'MLCControlFlowStatementTest#test_if_statement_generates_cpp_if'

  6) Error:
OpaqueTypeTest#test_opaque_type_cpp_lowering:
RuntimeError: No rule found for expression: NilClass
    lib/mlc/backends/cpp/services/rule_engine.rb:31:in 'MLC::Backends::Cpp::Services::RuleEngine#lower_expression'
    lib/mlc/backends/cpp/context.rb:140:in 'MLC::Backends::Cpp::Context#lower_expression'
    lib/mlc/backends/cpp/legacy_adapter.rb:111:in 'MLC::Backends::Cpp::LegacyAdapter#lower_function'
    lib/mlc/backends/cpp/legacy_adapter.rb:54:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc/backends/cpp/legacy_adapter.rb:79:in 'block in MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Array#each'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'Enumerable#flat_map'
    lib/mlc/backends/cpp/legacy_adapter.rb:78:in 'MLC::Backends::Cpp::LegacyAdapter#lower_module'
    lib/mlc/backends/cpp/legacy_adapter.rb:52:in 'MLC::Backends::Cpp::LegacyAdapter#lower'
    lib/mlc.rb:77:in 'MLC.compile'
    test/mlc/opaque_type_test.rb:72:in 'OpaqueTypeTest#test_opaque_type_cpp_lowering'

1540 runs, 4064 assertions, 1 failures, 5 errors, 1 skips

You have skipped tests. Run with --verbose for details.
rake aborted!
Command failed with status (1): [ruby -w -I"lib:test:lib" /home/jenya/.rbenv/versions/3.4.7/lib/ruby/gems/3.4.0/gems/rake-13.2.1/lib/rake/rake_test_loader.rb "test/builder/100_percent_coverage_test.rb" "test/builder/access_specifiers_test.rb" "test/builder/advanced_templates_test.rb" "test/builder/combinations_test.rb" "test/builder/comments_test.rb" "test/builder/cpp20_features_test.rb" "test/builder/dsl_generator_test.rb" "test/builder/dsl_v2/class_builder_test.rb" "test/builder/dsl_v2/control_dsl_test.rb" "test/builder/dsl_v2/dsl_v2_integration_test.rb" "test/builder/dsl_v2/expr_builder_test.rb" "test/builder/dsl_v2/function_builder_test.rb" "test/builder/dsl_v2/ownership_dsl_test.rb" "test/builder/dsl_v2/types_dsl_test.rb" "test/builder/edge_cases_test.rb" "test/builder/enum_class_test.rb" "test/builder/error_handling_test.rb" "test/builder/formatting_modes_test.rb" "test/builder/friend_declarations_test.rb" "test/builder/full_feature_validation_test.rb" "test/builder/inheritance_test.rb" "test/builder/initializer_lists_test.rb" "test/builder/inline_methods_test.rb" "test/builder/match_test.rb" "test/builder/modifiers_test.rb" "test/builder/nested_types_test.rb" "test/builder/ownership_test.rb" "test/builder/performance_test.rb" "test/builder/preprocessor_test.rb" "test/builder/product_test.rb" "test/builder/production_fixes_test.rb" "test/builder/result_option_test.rb" "test/builder/roundtrip_test.rb" "test/builder/static_members_test.rb" "test/builder/stream_ops_test.rb" "test/builder/sum_type_test.rb" "test/builder/template_dsl_test.rb" "test/builder/using_aliases_test.rb" "test/builder/whitespace_policy_test.rb" "test/integration/anonymous_namespace_roundtrip_test.rb" "test/integration/array_subscript_roundtrip_test.rb" "test/integration/attributes_roundtrip_test.rb" "test/integration/class_inheritance_roundtrip_test.rb" "test/integration/complex_class_test.rb" "test/integration/constexpr_variable_roundtrip_test.rb" "test/integration/constructor_destructor_roundtrip_test.rb" "test/integration/control_flow_roundtrip_test.rb" "test/integration/edge_cases_test.rb" "test/integration/enum_roundtrip_test.rb" "test/integration/error_recovery_test.rb" "test/integration/function_call_roundtrip_test.rb" "test/integration/function_modifiers_roundtrip_test.rb" "test/integration/generics_e2e_test.rb" "test/integration/gtk_gl_sample_test.rb" "test/integration/lambda_roundtrip_test.rb" "test/integration/literals_roundtrip_test.rb" "test/integration/member_access_roundtrip_test.rb" "test/integration/mlc_cli_test.rb" "test/integration/mlc_full_test.rb" "test/integration/more_operators_roundtrip_test.rb" "test/integration/namespace_body_roundtrip_test.rb" "test/integration/nested_class_members_test.rb" "test/integration/opengl_coverage_test.rb" "test/integration/optimization_integration_test.rb" "test/integration/out_of_line_operators_test.rb" "test/integration/parenthesized_roundtrip_test.rb" "test/integration/roundtrip_test.rb" "test/integration/stdlib_simple_e2e_test.rb" "test/integration/structured_bindings_test.rb" "test/integration/template_roundtrip_test.rb" "test/integration/template_types_roundtrip_test.rb" "test/integration/ternary_roundtrip_test.rb" "test/integration/unary_roundtrip_test.rb" "test/integration/using_declaration_roundtrip_test.rb" "test/integration/variable_declaration_roundtrip_test.rb" "test/lexer/lexer_basic_test.rb" "test/lexer/number_literals_test.rb" "test/lexer/token_test.rb" "test/lexer/trivia_in_tokens_test.rb" "test/mlc/analysis_passes_test.rb" "test/mlc/application_test.rb" "test/mlc/array_type_test.rb" "test/mlc/backends/bootstrap_test.rb" "test/mlc/backends/cpp_smoke_test.rb" "test/mlc/backends/legacy_adapter_test.rb" "test/mlc/backends/rule_engine_test.rb" "test/mlc/backends/string_helpers_equivalence_test.rb" "test/mlc/block_complexity_analyzer_test.rb" "test/mlc/block_expr_test.rb" "test/mlc/block_test.rb" "test/mlc/collections_test.rb" "test/mlc/comment_test.rb" "test/mlc/control_flow_statement_test.rb" "test/mlc/core_ir_generics_test.rb" "test/mlc/cpp_lowering_generics_test.rb" "test/mlc/diagnostics/event_logger_test.rb" "test/mlc/diagnostics/formatter_test.rb" "test/mlc/diagnostics/structured_logger_test.rb" "test/mlc/do_block_integration_test.rb" "test/mlc/do_block_test.rb" "test/mlc/effect_analyzer_test.rb" "test/mlc/enhanced_error_handling_test.rb" "test/mlc/error_diagnostics_test.rb" "test/mlc/esm_modules_test.rb" "test/mlc/event_bus_extensions_test.rb" "test/mlc/event_bus_test.rb" "test/mlc/function_registry_integration_test.rb" "test/mlc/function_registry_test.rb" "test/mlc/gcc_expression_strategy_test.rb" "test/mlc/generics_test.rb" "test/mlc/heredoc_test.rb" "test/mlc/import_service_integration_test.rb" "test/mlc/integration_test.rb" "test/mlc/io_test.rb" "test/mlc/lambda_test.rb" "test/mlc/let_test.rb" "test/mlc/list_comprehension_test.rb" "test/mlc/logical_ops_test.rb" "test/mlc/lowering_strategy_integration_test.rb" "test/mlc/match_analyzer_test.rb" "test/mlc/metadata_loader_service_test.rb" "test/mlc/module_system_test.rb" "test/mlc/multi_file_modules_test.rb" "test/mlc/opaque_type_test.rb" "test/mlc/pass_manager_test.rb" "test/mlc/pattern_matching_test.rb" "test/mlc/pipe_operator_test.rb" "test/mlc/roundtrip_test.rb" "test/mlc/rules_rule_engine_test.rb" "test/mlc/runtime_format_test.rb" "test/mlc/runtime_policy_api_test.rb" "test/mlc/runtime_policy_test.rb" "test/mlc/semantic_gen/engine_test.rb" "test/mlc/semantic_gen/passes/module_import_pass_test.rb" "test/mlc/semantic_gen/services/container_integration_test.rb" "test/mlc/stdlib_array_test.rb" "test/mlc/stdlib_conv_test.rb" "test/mlc/stdlib_file_test.rb" "test/mlc/stdlib_io_test.rb" "test/mlc/stdlib_math_test.rb" "test/mlc/stdlib_option_test.rb" "test/mlc/stdlib_resolution_test.rb" "test/mlc/stdlib_result_test.rb" "test/mlc/stdlib_scanner_integration_test.rb" "test/mlc/stdlib_scanner_test.rb" "test/mlc/stdlib_signature_registry_test.rb" "test/mlc/stdlib_string_test.rb" "test/mlc/stdlib_test.rb" "test/mlc/string_operations_test.rb" "test/mlc/sum_types_test.rb" "test/mlc/to_core_generics_test.rb" "test/mlc/type_constraint_solver_test.rb" "test/mlc/type_inference_architecture_test.rb" "test/mlc/type_inference_generics_test.rb" "test/mlc/type_registry_test.rb" "test/mlc/while_loop_test.rb" "test/nodes/array_subscript_test.rb" "test/nodes/base_nodes_test.rb" "test/nodes/block_statement_test.rb" "test/nodes/expression_nodes_test.rb" "test/nodes/function_call_test.rb" "test/nodes/member_access_test.rb" "test/nodes/parenthesized_expression_test.rb" "test/nodes/statement_nodes_test.rb" "test/nodes/ternary_test.rb" "test/nodes/unary_expression_test.rb" "test/parsers/array_subscript_parser_test.rb" "test/parsers/base_parser_test.rb" "test/parsers/block_parser_test.rb" "test/parsers/expression_parser_test.rb" "test/parsers/function_call_parser_test.rb" "test/parsers/member_access_parser_test.rb" "test/parsers/parenthesized_parser_test.rb" "test/parsers/program_parser_test.rb" "test/parsers/statement_parser_test.rb" "test/parsers/unary_parser_test.rb" ]

Tasks: TOP => test
(See full trace by running task with --trace)
