// =============================================================================
// MLC Safety Model Demo
// Демонстрация системы безопасности: smart pointers, unsafe, move semantics
// =============================================================================

// -----------------------------------------------------------------------------
// 1. Smart Pointers - безопасные типы указателей
// -----------------------------------------------------------------------------

// Shared<T> -> std::shared_ptr<T> (разделяемое владение)
fn use_shared(data: Shared<i32>) -> i32 = 0

// Weak<T> -> std::weak_ptr<T> (слабая ссылка)
fn use_weak(data: Weak<i32>) -> bool = true

// Owned<T> -> std::unique_ptr<T> (единоличное владение)
fn use_owned(data: Owned<i32>) -> i32 = 0

// -----------------------------------------------------------------------------
// 2. Unsafe blocks - для low-level операций
// -----------------------------------------------------------------------------

// Код в unsafe блоке
fn read_value(x: i32) -> i32 = unsafe { x }

// Вычисления в unsafe блоке
fn compute() -> i32 = unsafe { 10 + 20 }

// -----------------------------------------------------------------------------
// 3. Safe code - обычные функции без unsafe
// -----------------------------------------------------------------------------

fn add(a: i32, b: i32) -> i32 = a + b

fn multiply(a: i32, b: i32) -> i32 = a * b

fn square(x: i32) -> i32 = x * x

// -----------------------------------------------------------------------------
// Main
// -----------------------------------------------------------------------------

fn main() -> i32 = add(square(3), multiply(2, 5))
